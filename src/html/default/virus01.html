@@include('../inc/top.html')

<body>
  @@include('../inc/header.html')
  <!-- Contents -->
  <div class="contents platform virus">
    <div class="flex_wrap f_sb">
      <div class="monitoring_wrap">
        <div class="box">
          <div class="drawarea_wrap" style="height:470px;">
            <div id="models"><canvas></canvas></div>
            <div class="legend">
              <img src="../../images/img_sensor_legend.png" alt="범례">
            </div>
          </div>
        </div>
        <div class="box">
          <ul class="info_wrap">
            <li>
              <div class="tit_info_wrap flex_wrap f_sb">
                <h3 class="tit03_h3">발생자 정보</h3>
                <span class="tit_date as_c">2023년 06월 19일</span>
              </div>
              <div class="stage_area f_c flex_wrap">
                <img src="../../images/img_virussensor.png" alt="바이러스 센서 이미지">
                <ul>
                  <li><b>코로나</b><span><span class="font_b">2</span>건 / 10회</span></li>
                  <li><b>인플루엔자</b><span><span class="font_b">1</span>건 / 10회</span></li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="situchart_wrap">
        <div class="box">
          <h3 class="tit02_h3">측정소 &sol; 장비 현황 표시</h3>
          <table class="tbl_com">
            <tbody>
              <tr>
                <td>
                  <table class="tbl_scroll_head">
                    <caption>측정소 &sol; 장비 현황 표시 테이블</caption>
                    <colgroup>
                      <col style="width:20%;">
                      <col style="width:20%;">
                      <col style="width:17.5%;">
                      <col style="width:25%;">
                      <col style="width:17.5%;">
                    </colgroup>
                    <thead>
                      <tr>
                        <th scope="col">i-Watcher 정보</th>
                        <th scope="col">위치</th>
                        <th scope="col">진단 종류</th>
                        <th scope="col">장비 현황</th>
                        <th scope="col">검사 요청</th>
                      </tr>
                    </thead>
                  </table>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="tbl_scroll" style="height:120px;">
                    <table class="tbl_com">
                      <colgroup>
                        <col style="width:20%;">
                        <col style="width:20%;">
                        <col style="width:17.5%;">
                        <col style="width:25%;">
                        <col style="width:17.5%;">
                      </colgroup>
                      <tbody>
                        <tr>
                          <td>대전-33</td>
                          <td>유성구 가정동 123</td>
                          <td>면역진단</td>
                          <td>
                            <ul class="stage_wrap stage_wrap_s equip">
                              <li class="on">전원</li>
                              <li class="on">대기중</li>
                              <li class="on">검사중<p>[STEP = 3]</p></li>
                            </ul>
                          </td>
                          <td><button type="button" class="btn_m btn_mintline">검사<br class="m_con">요청</button></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="situation_wrap box">
          <h3 class="tit02_h3">검사결과 확인</h3>
          <div class="tbl_wrap">
            <table class="tbl_com">
              <tbody>
                <tr>
                  <td>
                    <table class="tbl_scroll_head">
                      <caption>검사결과 확인 테이블</caption>
                      <colgroup>
                        <col style="width:10%;">
                        <col style="width:15%;">
                        <col style="width:10%;">
                        <col style="width:10%;">
                        <col style="width:40%;">
                        <col style="width:15%;">
                      </colgroup>
                      <thead>
                        <tr>
                          <th scope="col">검사회차</th>
                          <th scope="col">날짜</th>
                          <th scope="col">시작</th>
                          <th scope="col">종료</th>
                          <th scope="col">결과</th>
                          <th scope="col">상세</th>
                        </tr>
                      </thead>
                    </table>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="tbl_scroll" style="height:200px;">
                      <table class="tbl_com">
                        <colgroup>
                          <col style="width:10%;">
                          <col style="width:15%;">
                          <col style="width:10%;">
                          <col style="width:10%;">
                          <col style="width:40%;">
                          <col style="width:15%;">
                        </colgroup>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>2023.5.15</td>
                            <td>09:00</td>
                            <td>10:00</td>
                            <td>
                              <b>Influenza</b>
                              <span class="result_badge positive">양성</span>
                              <br class="m_con">
                              <span class="pc_con">/</span>
                              <b>COVID-19</b>
                              <span class="result_badge negative">음성</span>
                            </td>
                            <td><button type='button' class='btn_m btn_lightgrayline'>보기</button></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="box">
          <div>
            <canvas id="chartVirus" height="185"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- // Contents -->
  @@include('../inc/footer.html')
  @@include('../inc/script.html')

  <script>
    // 데이터
    // 차트
    var chartData = {
      labels: ["0", "2", "4", "6", "8", "10", "12", "14", "16", "18", "20", "24"],
      datasets: [{
        label: '2019년',
        backgroundColor: '#30c1b75c',
        borderSkipped: false,
        data: [0, 0, 0, 0, 2, 0, 0, 0]
      }
      ]
    };
    var chartOption = {
      layout: {
        padding: {
          top: 20
        }
      },
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: false
      }
    };
    // 그리드
    var data01 = [
      { "d0": "대전-33", "d1": "유성구 가정동 123", "d2": "면역진단", "d3": "", "d4": "검사<br class='m_con'>요청" },
      { "d0": "대전-33", "d1": "유성구 가정동 123", "d2": "면역진단", "d3": "", "d4": "검사<br class='m_con'>요청" },
      { "d0": "대전-33", "d1": "유성구 가정동 123", "d2": "면역진단", "d3": "", "d4": "검사<br class='m_con'>요청" },
      { "d0": "대전-33", "d1": "유성구 가정동 123", "d2": "면역진단", "d3": "", "d4": "검사<br class='m_con'>요청" }
    ]
    var data02 = [
      { "d0": "1", "d1": "2023.5.15", "d2": "09:00", "d3": "10:00	", "d4": "", "d5": "보기" },
      { "d0": "1", "d1": "2023.5.15", "d2": "09:00", "d3": "10:00	", "d4": "", "d5": "보기" },
      { "d0": "1", "d1": "2023.5.15", "d2": "09:00", "d3": "10:00	", "d4": "", "d5": "보기" },
      { "d0": "1", "d1": "2023.5.15", "d2": "09:00", "d3": "10:00	", "d4": "", "d5": "보기" },
      { "d0": "1", "d1": "2023.5.15", "d2": "09:00", "d3": "10:00	", "d4": "", "d5": "보기" },
      { "d0": "1", "d1": "2023.5.15", "d2": "09:00", "d3": "10:00	", "d4": "", "d5": "보기" },
    ]


    // 함수
    // 차트
    function createChart(ctx, type) {
      return new Chart(ctx, {
        type: type,
        data: chartData,
        options: chartOption
      });
    }
    // 그리드 내 버튼
    function btnRequest(cellvalue) {
      var str = "";
      str += "<button type='button' class='btn_m btn_mintline'>" + cellvalue + "</button>";
      return str;
    }
    function stageWrap() {
      var str = "";
      str += `<ul class="stage_wrap stage_wrap_s equip">
        <li class="on">전원</li>
        <li class="on">대기중</li>
        <li class="on">검사중<p>[STEP = 3]</p></li>
      </ul>`
      return str;
    }
    function resultWrap() {
      var str = "";
      str += `<b>Influenza</b><span class="result_badge positive">양성</span><br class="m_con"><span class="pc_con">  /  </span><b>COVID-19</b><span class="result_badge negative">음성</span>`
      return str;
    }
    function btnMore(cellvalue) {
      var str = "";
      str += "<button type='button' class='btn_m btn_lightgrayline'>" + cellvalue + "</button>";
      return str;
    }


    // 차트
    createChart(document.getElementById('chartVirus').getContext('2d'), 'line');
    // 그리드
    $("#jqGridVirus_01").jqGrid({
      data: data01,
      datatype: "local",
      colModel: [
        { label: 'i-Watcher 정보', name: 'd0', width: 20, align: 'center' },
        { label: '위치', name: 'd1', width: 30, align: 'center' },
        { label: '진단 종류	', name: 'd2', width: 15, align: 'center' },
        { label: '장비 현황', name: 'd3', align: 'center', width: 40, formatter: stageWrap },
        { label: '검사 요청', name: 'd4', align: 'center', width: 15, formatter: btnRequest }
      ],
      height: 120,
      rowTotal: -1,
      jsonReader: { repeatitems: false },
      shrinkToFit: true,
      autoWidth: true
    })
    $("#jqGridVirus_02").jqGrid({
      data: data02,
      datatype: "local",
      colModel: [
        { label: '검사회차', name: 'd0', width: 10, align: 'center' },
        { label: '날짜', name: 'd1', width: 20, align: 'center' },
        { label: '시작', name: 'd2', width: 10, align: 'center' },
        { label: '종료', name: 'd3', width: 10, align: 'center' },
        { label: '결과', name: 'd4', width: 40, align: 'center', formatter: resultWrap },
        { label: '상세', name: 'd5', width: 10, align: 'center', formatter: btnMore }
      ],
      height: 200,
      rowTotal: -1,
      jsonReader: { repeatitems: false },
      shrinkToFit: true,
      autoWidth: true
    })
    jqgridInit();
  </script>
</body>

</html>