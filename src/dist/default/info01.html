<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>감염병 위험도 플랫폼</title>
  <link rel="icon" href="../../images/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="../../plugins/axicon/axicon.min.css" />
  <link rel="stylesheet" href="../../plugins/jquery-ui/themes/base/jquery-ui.min.css" />
  <link rel="stylesheet" href="../../plugins/jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.css">
  <link rel="stylesheet" href="../../plugins/jqueryui-timepicker-addon/dist/jquery.datetimepicker.css">
  <link rel="stylesheet" href="../../plugins/jqGrid/css/ui.jqgrid.css">
  <link rel="stylesheet" href="../../plugins/slick/slick.css">
  <link rel="stylesheet" href="../../css/merge.css">
</head>

<body>
  <!-- Header -->
<header class="flex_wrap f_sb">
  <h1 class="logo">
    <a href="info01.html">
      <img src="../../images/img_h1_title.png" alt="감염병 위험도 플랫폼">
    </a>
  </h1>
  <ul class="gnb flex_wrap f_sb pc_con" role="navigation">
    <li>
      <a class="on" href="info01.html">공간정보 모니터링</a>
    </li>
    <li>
      <a href="virus01.html">바이러스 모니터링</a>
    </li>
    <li>
      <a href="stat01.html">공간정보 통계분석</a>
      <ul class="sub">
        <li><a href="stat01.html">온도</a></li>
        <li><a href="#">습도</a></li>
        <li><a href="#">이산화탄소</a></li>
        <li><a href="#">변위</a></li>
        <li><a href="#">열</a></li>
        <li><a href="#">기침</a></li>
        <li><a href="#">바이러스</a></li>
        <li><a href="#">경보</a></li>
      </ul>
    </li>
  </ul>
  <div class="m_con">
    <a href="#" class="m_con allMenuOpen">전체메뉴 열기</a>
    <div id="allMenuBox" tabindex="0" class="ins_allMenuBox active">
      <div class="util_wrap flex_wrap f_sb ai_c">
        <ul class="ai_c">
          <li>
            <span><b>관리자</b>님</span>
            <span><a href="#" class="util user">내정보</a></span>
          </li>
          <li><a href="#" class="util log">로그인&sol;로그아웃</a></li>
        </ul>
        <a onclick="location.href='../admin/service01.html'" href="#" class="link flex_wrap ai_c">
          <span>모니터링 사이트</span>
          <img src="../../images/ico_blank.png" alt="모니터링 사이트 이동 아이콘">
        </a>
      </div>
      <ul class="m_gnb m_con" role="navigation">
        <li><a class="on" href="info01.html">공간정보 모니터링</a></li>
        <li><a href="virus01.html">바이러스 모니터링</a></li>
        <li>
          <a href="#">공간정보 통계분석</a>
          <ul class="sub">
            <li><a href="stat01.html">온도</a></li>
            <li><a href="#">습도</a></li>
            <li><a href="#">이산화탄소</a></li>
            <li><a href="#">변위</a></li>
            <li><a href="#">열</a></li>
            <li><a href="#">기침</a></li>
            <li><a href="#">바이러스</a></li>
            <li><a href="#">경보</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <div class="flex_wrap pc_con">
    <div class="as_c util_wrap flex_wrap f_e">
      <ul>
        <li>
          <span><b>관리자</b>님</span>
          <span><a href="#" class="util user">내정보</a></span>
        </li>
        <li><a href="#" class="util log">로그인&sol;로그아웃</a></li>
      </ul>
    </div>
    <a onclick="location.href='../admin/service01.html'" href="#" class="as_c link flex_wrap">
      <span>플랫폼관리자사이트</span>
      <img src="../../images/ico_blank.png" alt="플랫폼 관리자 사이트 이동 아이콘">
    </a>
  </div>
</header>
<!-- // Header -->
  <!-- Contents -->
  <div class="contents platform">
    <div class="flex_wrap f_sb">
      <div class="monitoring_wrap">
        <div class="tit_box">
          <h2 class="tit02_h2">모니터링 [프로그램실]</h2>
        </div>
        <div class="box">
          <div class="drawarea_wrap state02">
            <div id="models"></div>
            <div class="slideshow_wrap btn_arrow_v">
              <button id="btn3d" class="btn_3d btn btn_mint">초기화</button>
              <div class="slider slider-for">
                <div>
                  <img src="../../images/test_image_1.jpg">
                </div>
                <div>
                  <img src="../../images/test_image_2.jpg">
                </div>
                <div>
                  <img src="../../images/test_image_3.jpg">
                </div>
                <div>
                  <img src="../../images/test_image_4.jpg">
                </div>
                <div>
                  <img src="../../images/test_image_5.jpg">
                </div>
                <div>
                  <img src="../../images/test_image_6.jpg">
                </div>
              </div>
              <div>
                <div class="slider slider-nav">
                  <div>
                    <img src="../../images/test_image_1.jpg">
                  </div>
                  <div>
                    <img src="../../images/test_image_2.jpg">
                  </div>
                  <div>
                    <img src="../../images/test_image_3.jpg">
                  </div>
                  <div>
                    <img src="../../images/test_image_4.jpg">
                  </div>
                  <div>
                    <img src="../../images/test_image_5.jpg">
                  </div>
                  <div>
                    <img src="../../images/test_image_6.jpg">
                  </div>
                </div>
                <ul class="legend">
                  <img src="../../images/img_sensor_legend.png" alt="범례">
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chart_wrap box">
          <ul>
            <li>
              <h3 class="tit02_h3">온도 [TEMPERATURE]</h3>
              <div>
                <canvas id="chartTemperature" height="100"></canvas>
              </div>
            </li>
            <li>
              <h3 class="tit02_h3">습도 [HUMIDITY]</h3>
              <div>
                <canvas id="chartHumidity"></canvas>
              </div>
            </li>
            <li>
              <h3 class="tit02_h3">이산화탄소 [CO2]</h3>
              <div>
                <canvas id="chartCo2"></canvas>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="situchart_wrap">
        <div class="situation_wrap box">
          <h3 class="tit02_h3">연계상황</h3>
          <ul class="situation_link">
            <li>
              <h4>i-watcher</h4>
              <span class="state03">심각</span>
              <div class="pop_overlay spot_map_info">
                <div class="con_map_info">
                  <div class="flex_wrap f_sb">
                    <h4>i-watcher 정보</h4>
                    <button type="button" class="btn_pop_close" closepop></button>
                  </div>
                  <div class="flex_wrap f_sb">
                    <dl>
                      <dt>환경센서1</dt>
                      <dd class="state02">주의</dd>
                      <dt>환경센서2</dt>
                      <dd class="state01">안전</dd>
                      <dt>환경센서3</dt>
                      <dd class="state01">안전</dd>
                    </dl>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <h4>KMA API</h4>
              <span class="state03">심각</span>
            </li>
            <li>
              <h4>환경센서</h4>
              <span class="state01">안전</span>
              <div class="pop_overlay spot_map_info">
                <div class="con_map_info">
                  <div class="flex_wrap f_sb">
                    <h4>환경센서 정보</h4>
                    <button type="button" class="btn_pop_close" closepop></button>
                  </div>
                  <div class="flex_wrap f_sb">
                    <dl>
                      <dt>환경센서1</dt>
                      <dd class="state02">주의</dd>
                      <dt>환경센서2</dt>
                      <dd class="state01">안전</dd>
                      <dt>환경센서3</dt>
                      <dd class="state01">안전</dd>
                    </dl>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div class="box">
          <ul class="info_wrap">
            <li>
              <div class="tit_info_wrap flex_wrap f_sb">
                <div class="flex_wrap">
                  <h3 class="tit03_h3">발열</h3>
                  <p class="as_c">
                    <span class="font_b">2명</span> /<span>2명</span>
                  </p>
                </div>
                <a href="#" class="more as_c" onclick="showPopFever()">발열 팝업</a>
              </div>
              <div class="chart_wrap">
                <canvas id="chartFever"></canvas>
              </div>
            </li>
            <li>
              <div class="tit_info_wrap flex_wrap f_sb">
                <div class="flex_wrap">
                  <h3 class="tit03_h3">기침</h3>
                  <p class="as_c">
                    <span class="font_b">2명</span> /
                    <span>2명</span>
                  </p>
                </div>
                <a href="#" class="more as_c" onclick="showPopCough()">기침 팝업</a>
              </div>
              <div class="chart_wrap"></div>
            </li>
            <li>
              <div class="tit_info_wrap flex_wrap f_sb">
                <div class="flex_wrap">
                  <h3 class="tit03_h3">변위</h3>
                  <p class="as_c">
                    <span class="font_b">2명</span> /<span>2명</span>
                  </p>
                </div>
                <a href="#" class="more as_c" onclick="showPopDisplace()">변위 팝업</a>
              </div>
              <div class="chart_wrap"></div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- // Contents -->
  <!-- Footer -->
<div class="footer flex_wrap f_sb">
  <div class="flex_wrap">
    <img src="../../images/ico_call.png" style="height:23px;align-self:center;" alt="플랫폼 관리자 연락처 아이콘">
    <span>플랫폼 관리자  02-2624-3555</span>
  </div>
  <copy>Copyright &copy; 2023 . All rights reserved.</copy>
</div>
<!-- // Footer -->
  <script src="../../plugins/jquery/dist/jquery.min.js"></script>
<script src="../../plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="../../plugins/jquery-ui/ui/i18n/datepicker-ko.js"></script>
<script src="../../plugins/jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.js"></script>
<script src="../../plugins/jqueryui-timepicker-addon/dist/jquery.datetimepicker.full.min.js"></script>
<script src="../../js/Chart.bundle.js"></script>
<script src="../../plugins/jqGrid/js/jquery.jqGrid.js"></script>
<script src="../../plugins/jqGrid/js/i18n/grid.locale-kr.js"></script>
<script src="../../plugins/slick/slick.min.js"></script>
<script src="../../js/file_attach.js"></script>
<script src="../../js/ui_common.js"></script>
  <!-- 발열 팝업 -->
<div id="popFever" class="pop_overlay" style="display:none;">
  <div class="pop_wrap p_fever">
    <div class="pop_tit">
      <div class="flex_wrap ai_c">
        <h1>발열 i-watcher</h1>
        <span class="tit_date">2023년 06월 19일</span>
      </div>
      <button type="button" class="btn_pop_close" closePop></button>
    </div>
    <div class="pop_body">
      <div class="pop_cont">
        <table class="tbl_row tbl_tit">
          <caption>발열 정보 제목 테이블</caption>
          <colgroup>
            <col style="width:40%;">
            <col style="width:60%;">
          </colgroup>
          <tr>
            <th scope="row">i-watcher 정보</th>
            <td class="alignC">ID name</td>
          </tr>
        </table>
        <div class="tbl_wrap">
          <table id="jqGridPopFever" class="jq-grid"></table>
        </div>
        <div class="box" style="width:100%;height:191px;">
          <canvas id="chartPopFever"></canvas>
        </div>
        <div class="btn_wrap alignR">
          <button type="button" class="btn_m btn_greenline">엑셀 저장</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--// 발열 팝업 --> <!-- 발열 팝업 -->
  <!-- 이미지 팝업 -->
<div id="popImgDetail" class="pop_overlay" style="display:none;">
  <div class="pop_wrap p_imgdetail">
    <div class="pop_tit">
      <div>
        <h1>촬영시간</h1>
        <h3 class="tit03_h3 alignC">hh:mm</h3>
      </div>
      <button type="button" class="btn_pop_close" closePop></button>
    </div>
    <div class="pop_body">
      <div class="pop_cont">
        <div class="spectrum_wrap">
          <img src="../../images/test_image_1.jpg">
        </div>
        <div class="spectrum_wrap"></div> <!-- 이미지 없는 경우 -->
      </div>
    </div>
  </div>
</div>
<!--// 이미지 팝업 --> <!-- 발열_촬영사진 팝업 -->
  <!-- 기침 팝업 -->
<div id="popCough" class="pop_overlay" style="display:none;">
  <div class="pop_wrap p_cough">
    <div class="pop_tit">
      <div class="flex_wrap ai_c">
        <h1>기침 i-watcher</h1>
        <span class="tit_date">2023년 06월 19일</span>
      </div>
      <button type="button" class="btn_pop_close" closePop></button>
    </div>
    <div class="pop_body">
      <div class="pop_cont">
        <table class="tbl_row tbl_tit">
          <caption>기침 정보 제목 테이블</caption>
          <colgroup>
            <col style="width:40%;">
            <col style="width:60%;">
          </colgroup>
          <tr>
            <th scope="row">i-watcher 정보</th>
            <td class="alignC">ID name</td>
          </tr>
        </table>
        <div class="box" style="width:100%;height:300px;">
          <canvas id="chartPopCough"></canvas>
        </div>
        <div>
          <h3 class="tit02_h3">기침 이미지</h3>
          <section class="regular slider btn_arrow_h slideshow_wrap flex_wrap ai_c">
            <div>
              <img src="../../images/test_image_1.jpg">
              <p>19시</p>
            </div>
            <div>
              <p>20시</p>
            </div>
            <div>
              <img src="../../images/test_image_3.jpg">
              <p>21시</p>
            </div>
            <div>
              <img src="../../images/test_image_4.jpg">
              <p>22시</p>
            </div>
            <div>
              <img src="../../images/test_image_5.jpg">
              <p>23시</p>
            </div>
            <div>
              <img src="../../images/test_image_6.jpg">
              <p>24시</p>
            </div>
          </section>
        </div>
        <div class="btn_wrap alignR">
          <button type="button" class="btn_m btn_greenline">엑셀 저장</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--// 기침 팝업 --> <!-- 기침 팝업 -->
  <!-- 변위 팝업 -->
<div id="popDisplace" class="pop_overlay" style="display:none;">
  <div class="pop_wrap p_fever">
    <div class="pop_tit">
      <div class="flex_wrap ai_c">
        <h1>발열 i-watcher</h1>
        <span class="tit_date">2023년 06월 19일</span>
      </div>
      <button type="button" class="btn_pop_close" closePop></button>
    </div>
    <div class="pop_body">
      <div class="pop_cont">
        <table class="tbl_row tbl_tit">
          <caption>발열 정보 제목 테이블</caption>
          <colgroup>
            <col style="width:40%;">
            <col style="width:60%;">
          </colgroup>
          <tr>
            <th scope="row">i-watcher 정보</th>
            <td class="alignC">ID name</td>
          </tr>
        </table>
        <div class="tbl_wrap">
          <table id="jqGridPopDisplace" class="jq-grid"></table>
        </div>
        <div class="btn_wrap alignR">
          <button type="button" class="btn_m btn_greenline">엑셀 저장</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--// 변위 팝업 --> <!-- 변위 팝업 -->

  <script>
    // 데이터
    // 차트
    var chartData = {
      labels: ["AM11:00", "PM13:00", "PM14:00", "PM15:00", "PM16:00", "PM17:00", "PM18:00", "PM19:00"],
      datasets: [
        {
          label: '2019년',
          backgroundColor: '#30c1b75c',
          borderSkipped: false,
          data: [160, 1767, 360, 1767, 160, 240, 160, 1767]
        },
        {
          label: '2019년',
          backgroundColor: '#3476d080',
          borderSkipped: false,
          data: [514, 177, 566, 54, 160, 240, 160, 1540]
        }]
    };
    var chartOption = {
      layout: {
        padding: {
          top: 20
        }
      },
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: false
      }
    };
    var chartDataDual = {
      labels: ['A', 'B', 'C', 'D', 'E'],
      datasets: [{
        label: '막대형',
        data: [10, 15, 7, 12, 9],
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1,
        type: 'bar'
      }, {
        label: '꺾은선형',
        data: [8, 10, 6, 9, 7],
        fill: false,
        borderColor: 'rgba(255, 99, 132, 1)',
        pointBackgroundColor: 'rgba(255, 99, 132, 1)',
        pointBorderColor: 'rgba(255, 99, 132, 1)',
        pointRadius: 5,
        type: 'line'
      }]
    };
    var chartOptionDual = {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true
        }
      },
      legend: {
        position: 'top',
        align: 'end'
      }
    };
    // 그리드
    var gridData = [
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" },
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" },
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" },
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" },
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" },
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" },
      { "d0": "hh:mm:ss", "d1": "발열", "d2": "37.3℃", "d3": "보기" }
    ]
    var mydata = [
    {"d0": "", "d1": "", "d2": "", "d3": "", "d4": "", attr: { "d0": { rowspan: "4" }}},
    {"d0": "", "d1": "", "d2": "", "d3": "", "d4": "", attr: { "d0": { display: "none" }}},
    {"d0": "", "d1": "", "d2": "", "d3": "", "d4": "", attr: { "d0": { display: "none" }}},
    {"d0": "", "d1": "", "d2": "", "d3": "", "d4": "", attr: { "d0": { display: "none" }}},
    {"d0": "", "d1": "", "d2": "", "d3": "", "d4": "", attr: { "d0": { rowspan: "4" }}},
    {"d0": "", "d1": "", "d2": "", "d3": "", "d4": "", attr: { "d0": { display: "none" }}}
    ],
      arrtSetting = function (rowId, val, rawObject, cm) {
        var attr = rawObject.attr[cm.name], result;
        if (attr.rowspan) {
          result = ' rowspan=' + '"' + attr.rowspan + '"';
        } else if (attr.display) {
          result = ' style="display:' + attr.display + '"';
        }
        return result;
      };


    // 함수
    // 팝업
    function showPopCough() {
      $('#popCough').show();
      imgSlide();
    }
    function showPopDisplace() {
      $('#popDisplace').show();
      jqgridInit();
      rowSpanTdSet();
    }
    function showPopImgDetail() {
      $('#popImgDetail').show();
    }
    function showPopFever() {
      $('#popFever').show();
      jqgridInit();
    }
    // 연계상황 레이어 팝업
    function showPopOverlay() {
      $(this).find('.pop_overlay').show();
    }
    function hidePopOverlay(e) {
      e.stopPropagation();
      $(this).parents('.pop_overlay').hide();
    }
    $(".situation_link li").on('click', showPopOverlay);
    $(".situation_link li .btn_pop_close").on('click', hidePopOverlay);

    // 차트
    function createChart(ctx, type) {
      return new Chart(ctx, {
        type: type,
        data: chartData,
        options: chartOption
      });
    }
    function createChartDual(ctx) {
      return new Chart(ctx, {
        type: 'bar',
        data: chartDataDual,
        options: chartOptionDual
      });
    }

    // 그리드 내 버튼
    function btnMore(cellvalue) {
      var str = "";
      str += "<button type='button' class='btn_m btn_blue' onclick='showPopImgDetail()'>" + cellvalue + "</button>";
      return str;
    }
    // 병합 셀 스타일 적용
    function rowSpanTdSet(){
      var mergedCells = document.querySelectorAll('td[rowspan]');
        mergedCells.forEach(function (cell) {
          // 병합된 셀에 스타일 적용
          cell.classList.add('absorption');
        });
    }



    // 이미지 슬라이더
    function imgSlide() {
      // 기침 팝업 내 이미지 슬라이더
      $(".slideshow_wrap.regular").slick({
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 1,
        responsive: [
          {
            breakpoint: 960,
            settings: {
              slidesToShow: 2
            }
          },
          {
            breakpoint: 768,
            settings: {
              slidesToShow: 1
            }
          }
        ]
      });
    }


    // 공간정보 모니터링 이미지 슬라이더
    $('.slider-for').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      fade: true,
      asNavFor: '.slider-nav'
    });
    $('.slider-nav').slick({
      slidesToShow: 3,
      slidesToScroll: 1,
      asNavFor: '.slider-for',
      centerMode: true,
      focusOnSelect: true,
      vertical: true
    });

    // 차트
    createChart(document.getElementById('chartFever').getContext('2d'), 'line');
    createChart(document.getElementById('chartTemperature').getContext('2d'), 'line');
    createChart(document.getElementById('chartHumidity').getContext('2d'), 'line');
    createChart(document.getElementById('chartCo2').getContext('2d'), 'line');
    createChart(document.getElementById('chartPopFever').getContext('2d'), 'line');
    createChartDual(document.getElementById('chartPopCough').getContext('2d'));

    // 그리드
    $("#jqGridPopFever").jqGrid({
      data: gridData,
      datatype: "local",
      colModel: [
        { label: '측정시간', name: 'd0', align: 'center' },
        { label: '이상징후', name: 'd1', align: 'center' },
        { label: '발열온도', name: 'd2', align: 'center' },
        { label: '촬영사진', name: 'd3', align: 'center', formatter: btnMore },
      ],
      height: 240,
      rowTotal: -1,
      rownumbers: true,
      jsonReader: { repeatitems: false },
      shrinkToFit: true,
      autoWidth: true
    })
    jqgridInit();

    $("#jqGridPopDisplace").jqGrid({
      data: mydata,
      datatype: "local",
      colModel: [
        {label: ' ', name: 'd0', align: 'center', cellattr: arrtSetting },
        {label: ' ', name: 'd1', align: 'center'},
        {label: ' ', name: 'd2', align: 'center'},
        {label: ' ', name: 'd3', align: 'center'},
        {label: ' ', name: 'd4', align: 'center'}
      ],
      height: 400,
      rowTotal: -1,
      rownumbers: true,
      jsonReader: { repeatitems: false },
      shrinkToFit: true,
      autoWidth: true,
      beforeSelectRow: function () {
        rowSpanTdSet()
      }
    })
    jqgridInit();
  </script>
</body>

</html>